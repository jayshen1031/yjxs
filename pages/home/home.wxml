<view class="container">
  <!-- æ¯æ—¥ç®´è¨€ -->
  <view class="quote-card fade-in">
    <view class="quote-text">{{ currentQuote }}</view>
  </view>

  <!-- å¿«é€Ÿç»Ÿè®¡ -->
  <view class="grid grid-2 mb-20">
    <view class="grid-item">
      <view class="stat-card">
        <view class="stat-number">{{ todayMemoCount }}</view>
        <view class="stat-label">ä»Šæ—¥è®°å½•</view>
      </view>
    </view>
    <view class="grid-item">
      <view class="stat-card">
        <view class="stat-number">{{ totalMemoCount }}</view>
        <view class="stat-label">æ€»è®°å½•æ•°</view>
      </view>
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="card">
    <view class="card-content">
      <view class="title">å¿«é€Ÿè®°å½•</view>
      <view class="grid grid-2">
        <view class="grid-item">
          <button class="btn btn-primary" bindtap="goToTextMemo">
            <text>ğŸ“ æ–‡å­—è®°å½•</text>
          </button>
        </view>
        <view class="grid-item">
          <button class="btn btn-primary" bindtap="goToVoiceMemo">
            <text>ğŸ¤ è¯­éŸ³è®°å½•</text>
          </button>
        </view>
      </view>
      <view class="planning-quick-action mt-20">
        <button class="btn btn-planning" bindtap="goToPlanningMemo">
          <text>ğŸ“‹ æ˜æ—¥è§„åˆ’</text>
        </button>
      </view>
    </view>
  </view>

  <!-- æ˜æ—¥è§„åˆ’é‡ç‚¹ -->
  <view wx:if="{{ todayPlanning }}" class="card planning-highlight">
    <view class="card-content">
      <view class="planning-header">
        <view class="title">ğŸ“‹ æ˜æ—¥è§„åˆ’é‡ç‚¹</view>
        <view class="planning-date">{{ planningDate }}</view>
      </view>
      <view class="planning-content">
        <text class="planning-text">{{ todayPlanning.content }}</text>
      </view>
      <view class="planning-meta">
        <view class="time-tag">{{ todayPlanning.formattedTime }}</view>
        <view class="tag planning">è§„åˆ’</view>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘è®°å½• -->
  <view class="card">
    <view class="card-content">
      <view class="title">æœ€è¿‘è®°å½•</view>
      <view wx:if="{{ recentMemos.length > 0 }}">
        <view class="list-item" wx:for="{{ recentMemos }}" wx:key="id">
          <view class="content">
            <view class="subtitle">{{ item.content }}</view>
            <view class="memo-meta">
              <view class="time-tag">{{ item.formattedTime }}</view>
              <view class="tag period-{{ item.periodColor }}">{{ item.timePeriod }}</view>
              <view class="tag category-{{ item.categoryColor }}">{{ item.category }}</view>
              <view class="tag {{ item.isPlanning ? 'planning' : item.type }}">
                {{ item.isPlanning ? 'è§„åˆ’' : (item.type === 'voice' ? 'è¯­éŸ³' : 'æ–‡å­—') }}
              </view>
            </view>
            <!-- ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾ -->
            <view class="memo-tags" wx:if="{{ item.tags && item.tags.length > 0 }}">
              <text class="tag user-tag" wx:for="{{ item.tags }}" wx:key="index" wx:for-item="tag">{{ tag }}</text>
            </view>
          </view>
        </view>
        <view class="text-center mt-20">
          <button class="btn btn-secondary" bindtap="viewAllMemos">æŸ¥çœ‹å…¨éƒ¨</button>
        </view>
      </view>
      <view wx:else class="empty-state">
        <view class="icon">ğŸ“</view>
        <view class="text">æš‚æ— è®°å½•ï¼Œå¼€å§‹è®°å½•ç¾å¥½ç”Ÿæ´»å§ï¼</view>
      </view>
    </view>
  </view>

  <!-- æé†’è®¾ç½® -->
  <view class="card">
    <view class="card-content">
      <view class="title">æé†’è®¾ç½®</view>
      <view class="flex flex-between">
        <text>å®šæ—¶æé†’</text>
        <switch checked="{{ reminderEnabled }}" bindchange="toggleReminder" color="#6366f1"/>
      </view>
      <view wx:if="{{ reminderEnabled }}" class="mt-20">
        <text class="subtitle">æé†’é—´éš”ï¼š{{ reminderInterval }}åˆ†é’Ÿ</text>
        <slider 
          value="{{ reminderInterval }}" 
          min="30" 
          max="480" 
          step="30"
          show-value
          bindchange="onReminderIntervalChange"
          activeColor="#6366f1"
          backgroundColor="#e5e7eb"
        />
      </view>
    </view>
  </view>
</view>