<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">ğŸ“ˆ HUMAN3.0è¯„ä¼°å†å²</view>
    <view class="header-subtitle">æŸ¥çœ‹æ‚¨çš„æˆé•¿è½¨è¿¹</view>
  </view>

  <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
  <view class="stats-card" wx:if="{{ assessments.length > 0 }}">
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-value">{{ assessments.length }}</text>
        <text class="stat-label">æ€»æµ‹è¯„æ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{ latestLevel }}</text>
        <text class="stat-label">å½“å‰ç­‰çº§</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{ scoreChange > 0 ? '+' : '' }}{{ scoreChange }}</text>
        <text class="stat-label">åˆ†æ•°å˜åŒ–</text>
      </view>
    </view>
  </view>

  <!-- è¯„ä¼°å†å²åˆ—è¡¨ -->
  <view class="history-list" wx:if="{{ assessments.length > 0 }}">
    <view
      class="history-item"
      wx:for="{{ assessments }}"
      wx:key="id"
      bindtap="viewAssessmentDetail"
      data-assessment="{{ item }}"
    >
      <!-- æ—¥æœŸæ ‡ç­¾ -->
      <view class="item-date-tag">
        <text class="date-icon">ğŸ“…</text>
        <text class="date-text">{{ item.dateDisplay }}</text>
      </view>

      <!-- è¯„ä¼°ä¿¡æ¯ -->
      <view class="item-content">
        <view class="item-header">
          <view class="item-title">
            <text class="role-badge role-{{ item.role }}">{{ item.roleText }}</text>
            <text class="level-badge level-{{ item.level }}">{{ item.levelText }}</text>
          </view>
          <view class="item-score">
            <text class="score-number">{{ item.totalScore }}</text>
            <text class="score-unit">åˆ†</text>
          </view>
        </view>

        <!-- ç»´åº¦åˆ†æ•° -->
        <view class="dimension-scores">
          <view
            class="dimension-item"
            wx:for="{{ item.dimensionList }}"
            wx:key="name"
            wx:for-item="dimension"
          >
            <text class="dimension-name">{{ dimension.name }}</text>
            <view class="dimension-progress">
              <view class="progress-bar">
                <view
                  class="progress-fill"
                  style="width: {{ dimension.percentage }}%"
                ></view>
              </view>
              <text class="dimension-score">{{ dimension.score }}</text>
            </view>
          </view>
        </view>

        <!-- æ—¶é—´ä¿¡æ¯ -->
        <view class="item-footer">
          <text class="time-info">â±ï¸ ç”¨æ—¶ {{ item.duration }}åˆ†é’Ÿ</text>
          <text class="detail-link">æŸ¥çœ‹è¯¦æƒ… â†’</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{ assessments.length === 0 }}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">è¿˜æ²¡æœ‰è¯„ä¼°è®°å½•</text>
    <button class="btn btn-primary" bindtap="startNewAssessment">
      <text>ğŸš€ å¼€å§‹ç¬¬ä¸€æ¬¡è¯„ä¼°</text>
    </button>
  </view>
</view>
